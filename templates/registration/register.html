{% extends "base.html" %}

{% block content %}
    {# Todo: refactor form render #}

    <h1 class="mb-3">Register</h1>

    <form method="POST" action="{% url 'register' %}">{% csrf_token %}
{#        {% if form.errors %}#}
{#            {% for error in form.errors.as_data.values %}#}
{#                {% for data in error.0 %}#}
{#                    <div class="alert alert-danger" role="alert">#}
{#                        {{ data }}#}
{#                    </div>#}
{#                {% endfor %}#}
{#            {% endfor %}#}
{#        {% endif %}#}

        <div class="form-group row mb-3">
            <label for="id_username" class="col-2 col-form-label">{{ form.username.label_tag }}</label>
            <div class="col-10">
                <input type="text" class="form-control" name="username" maxlength="150" autofocus=""
                       required="" id="id_username" value="{{ form.username.value|default_if_none:'' }}">
                <div id="usernameHelpBlock" class="form-text">
                    Required. 150 characters or fewer. Letters, digits and @/./+/-/_ only.
                </div>
                {% if form.username.errors %}
                    <div class="alert alert-danger" role="alert">
                        {{ form.username.errors }}
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="form-group row mb-3">
            <label for="id_email" class="col-2 col-form-label">{{ form.email.label_tag }}</label>
            <div class="col-10">
                <input type="email" class="form-control" name="email" required="" id="id_email"
                       value="{{ form.email.value|default_if_none:'' }}">
                <div id="emailHelpBlock" class="form-text">
                    Registration confirmation link will be sent to this email
                </div>
                {% if form.email.errors %}
                    <div class="alert alert-danger" role="alert">
                        {{ form.email.errors }}
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="form-group row mb-3">
            <label for="id_password1" class="col-2 col-form-label">{{ form.password1.label_tag }}</label>
            <div class="col-10">
                <input class="form-control" type="password" name="password1" autocomplete="new-password" required=""
                       id="id_password1">
                <div id="password1HelpBlock" class="form-text">
                    <ul>
                        <li>Your password can’t be too similar to your other personal information.</li>
                        <li>Your password must contain at least 8 characters.</li>
                        <li>Your password can’t be a commonly used password.</li>
                        <li>Your password can’t be entirely numeric.</li>
                    </ul>
                </div>
                {% if form.password1.errors %}
                    <div class="alert alert-danger" role="alert">
                        {{ form.password1.errors }}
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="form-group row mb-3">
            <label for="id_password2" class="col-2 col-form-label">{{ form.password2.label_tag }}</label>
            <div class="col-10">
                <input class="form-control" type="password" name="password2" autocomplete="new-password" required=""
                       id="id_password2">
                <div id="password2HelpBlock" class="form-text">
                    Enter the same password as before, for verification.
                </div>
                {% if form.password2.errors %}
                    <div class="alert alert-danger" role="alert">
                        {{ form.password2.errors }}
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="form-group row mb-3">
            <div class="offset-2">
                <button class="btn btn-lg btn-primary col-offset-2" type="submit">Register</button>
            </div>
        </div>
    </form>
{% endblock %}